# 스크래핑 데이터 경로 수정 및 재현 확인 작업

## 작업 개요
- **목적**: 스크래핑 데이터 저장 경로 문제 해결 및 두 커뮤니티 재현 확인
- **시작 시간**: 2025년 6월 4일 20:40 (KST)
- **완료 시간**: 2025년 6월 4일 20:53 (KST)
- **작업 상태**: ✅ 완료

## 문제점 분석
1. **API 데이터 로드 문제**: API가 `scraper-data.json`에서 데이터를 읽고 있으나, 실제 스크래핑 데이터는 `scraping/data/` 폴더에 저장됨
2. **스크래퍼 저장 경로 불일치**: 에펨코리아 스크래퍼가 루트 디렉토리에 저장하고 있었음
3. **실험 페이지 UI 개선**: 일반 파일 업로드 기능 삭제 요청
4. **루리웹 제목 추출 문제**: "게시글 #번호" 형식으로 잘못 표시되는 문제

## 수행 작업 목록

### ✅ 1. API 라우트 수정
- **파일**: `frontend/app/api/scraper-data/route.ts`
- **수정 내용**: 
  - `scraping/data` 폴더의 모든 JSON 파일을 자동으로 읽어서 데이터 반환
  - 기존 `scraper-data.json` 파일과 새로운 방식 모두 지원
  - 파일별 로딩 상태 및 디버깅 로그 추가

### ✅ 2. 에펨코리아 스크래퍼 경로 수정
- **파일**: `scraping/scrapers/fmkorea_scraper_v3.py`
- **수정 내용**: 데이터 저장 경로를 `scraping/data` 폴더로 변경

### ✅ 3. 실험 페이지 UI 개선
- **파일**: `frontend/app/scraper-experiment/page.tsx`
- **수정 내용**:
  - 일반 파일 업로드 기능 완전 삭제
  - WSL `scraping/data` 폴더 파일 선택만 남김
  - 카드 제목을 "JSON 파일 로드"로 변경
  - 설명 부분에서 일반 업로드 관련 내용 삭제

### ✅ 4. 기존 데이터 초기화
- 기존 API 데이터 파일 (`scraper-data.json`) 삭제
- 기존 스크래핑 데이터 (`scraping/data/*.json`) 모두 삭제

### ✅ 5. 에펨코리아 스크래핑 실행
- **실행 시간**: 2025년 6월 4일 20:49-20:50 (KST)
- **결과**: 9개 게시글 성공적으로 추출
- **저장 파일**: `fmkorea-page-scraping-1749037858.json` (40KB, 942 lines)

### ✅ 6. 루리웹 스크래핑 실행
- **실행 시간**: 2025년 6월 4일 20:51-20:52 (KST)
- **결과**: 8개 게시글 성공적으로 추출
- **저장 파일**: `ruliweb_politics_experiment_20250604_205254.json` (56KB, 1922 lines)
- **제목 추출 문제 해결**: 더 이상 "게시글 #번호" 형식이 아닌 실제 제목 추출

## 새로 작성하거나 수정한 파일 목록

### 수정된 파일
- **frontend/app/api/scraper-data/route.ts**: API가 scraping/data 폴더의 모든 JSON 파일을 자동으로 읽어서 반환하도록 수정
- **scraping/scrapers/fmkorea_scraper_v3.py**: 데이터 저장 경로를 scraping/data 폴더로 수정
- **frontend/app/scraper-experiment/page.tsx**: 일반 파일 업로드 기능 삭제, WSL 폴더 선택만 남김

### 새로 생성된 데이터 파일
- **scraping/data/fmkorea-page-scraping-1749037858.json**: 에펨코리아 9개 게시글 데이터
- **scraping/data/ruliweb_politics_experiment_20250604_205254.json**: 루리웹 8개 게시글 데이터

## 스크래핑 결과 요약

### 에펨코리아 (9개 게시글)
1. 나도 한줌단 가입 (조회수: 21, 추천: 8, 댓글: 6)
2. 준석이도 복당 마려워서 김문수 안팬건데... (조회수: 64, 추천: 0, 댓글: 1)
3. 큰일났다. 차별금지법... (조회수: 158, 추천: 0, 댓글: 1)
4. 결국 지금 당에 필요한건... (조회수: 21, 추천: 1, 댓글: 1)
5. 준스기 라이브 계속하나 (조회수: 77, 추천: 0, 댓글: 2)
6. 검열된 메시지입니다 (조회수: 54, 추천: 4, 댓글: 1)
7. 시위,신고,화력,청원,민원 요청/인증 금지... (조회수: 2,210,187, 추천: 0, 댓글: 36)
8. 잉여력/이벤트 사항은 이벤트탭 이용부탁 (조회수: 1,969,805, 추천: 0, 댓글: 54)
9. 후원계좌 안내, 모집, 홍보 등 관련 게시글 금지 (조회수: 1,783,248, 추천: 0, 댓글: 61)

### 루리웹 (8개 게시글)
1. 더레프트님의 작별인사 "진보적 보수성" (조회수: 1,977, 추천: 91, 댓글: 18)
2. 질문 있습니다. 전에 못 보던 상황인데... (조회수: 1,505, 추천: 59, 댓글: 7)
3. 취임식조차 조용히를 못 넘어감 (조회수: 1,319, 추천: 33, 댓글: 10)
4. 취임하자마자 레임덕 쳐맞고 자빠진... (조회수: 1,155, 추천: 51, 댓글: 9)
5. 이거 때메 청걸래가 미룬건가? (조회수: 1,207, 추천: 51, 댓글: 6)
6. 럼통령의 무능을 너무 얕봤던거 같다 (조회수: 973, 추천: 30, 댓글: 5)
7. ""가 트럼프 면전에다가 "레이시스트 레드넥"... (조회수: 643, 추천: 23, 댓글: 9)
8. 지금 트럼프 손에 목줄이 있는거지?? (조회수: 752, 추천: 20, 댓글: 5)

## 검증 및 확인사항

### ✅ 해결된 문제들
1. **API 데이터 로드 문제**: API가 이제 `scraping/data` 폴더의 모든 JSON 파일을 자동으로 읽어서 반환
2. **스크래퍼 저장 경로 통일**: 에펨코리아와 루리웹 모두 `scraping/data` 폴더에 저장
3. **루리웹 제목 추출 개선**: 실제 제목이 올바르게 추출됨
4. **실험 페이지 UI 개선**: 일반 파일 업로드 삭제, WSL 폴더 선택만 남김

### 🎯 다음 단계
- 실험 페이지에서 두 커뮤니티의 게시글들이 모두 올바르게 표시되는지 확인
- 댓글 렌더링 문제(프로필 이미지, 작성자, 추천/비추천) 해결 여부 확인
- 재현 품질 검증

## 작업 완료 시간
- **완료 시간**: 2025년 6월 4일 20:53 (KST)
- **총 소요 시간**: 약 13분
- **요청 성공 여부**: ✅ 성공 