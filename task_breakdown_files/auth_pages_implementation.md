# 인증 페이지 구현 작업 계획 (UI 우선 개발 방식)

## 📋 작업 개요
- **목표**: 참조 문서를 바탕으로 회원가입, 로그인, 이메일 인증 페이지 구현
- **기술 스택**: Next.js 14 (App Router), MongoDB Atlas, TypeScript
- **인증 방식**: 이메일 인증 기반 (휴대폰 인증 제외)
- **개발 방법론**: UI 우선 개발 → 실제 사용 테스트 → 문제 발생 시 TDD 적용

## 🎯 새로운 개발 방식
1. **UI 우선 구현**: 사용자 인터페이스를 먼저 구현
2. **실제 사용 테스트**: 브라우저에서 직접 기능 테스트
3. **문제 발견 시 TDD**: 버그나 문제 발생 시에만 TDD 방식으로 해결

## 🎯 작업 단계별 체크리스트

### Phase 1: 프로젝트 환경 설정 및 분석
- [x] 1.1 현재 프로젝트 구조 분석
- [x] 1.2 package.json 의존성 확인
- [x] 1.3 .env.local 파일 확인 (MONGODB_URI)
- [x] 1.4 기존 auth.ts 파일 분석
- [x] 1.5 참조 문서 상세 분석 완료

### Phase 2: 테스트 환경 설정
- [x] 2.1 Jest 및 Testing Library 설정 확인
- [x] 2.2 API 테스트를 위한 MSW(Mock Service Worker) 설정
- [x] 2.3 MongoDB 테스트 데이터베이스 설정
- [x] 2.4 테스트 유틸리티 함수 작성

### Phase 3: API 라우트 TDD 구현
#### 3.1 회원가입 API (TDD)
- [x] 3.1.1 🔴 회원가입 API 테스트 작성
- [x] 3.1.2 🟢 회원가입 API 구현 (테스트 통과)
- [x] 3.1.3 🔵 코드 리팩토링

#### 3.2 로그인 API (TDD)
- [x] 3.2.1 🔴 로그인 API 테스트 작성
- [x] 3.2.2 🟢 로그인 API 구현 (테스트 통과)
- [x] 3.2.3 🔵 코드 리팩토링

#### 3.3 이메일 인증 API (TDD)
- [x] 3.3.1 🔴 이메일 인증 발송 API 테스트 작성
- [x] 3.3.2 🟢 이메일 인증 발송 API 구현
- [x] 3.3.3 🔴 이메일 인증 확인 API 테스트 작성
- [x] 3.3.4 🟢 이메일 인증 확인 API 구현
- [x] 3.3.5 🔵 코드 리팩토링

### Phase 4: UI 우선 구현 (새로운 방식)
#### 4.1 사용자 메뉴 UI 구현
- [ ] 4.1.1 우측 상단 사용자 이모티콘 버튼 추가
- [ ] 4.1.2 드롭다운 메뉴 구현 (회원가입, 로그인, 아이디/비밀번호 찾기)
- [ ] 4.1.3 각 메뉴 클릭 시 해당 페이지로 라우팅

#### 4.2 회원가입 페이지 구현
- [ ] 4.2.1 회원가입 폼 UI 구현 (참조 문서 기반)
- [ ] 4.2.2 실시간 폼 검증 구현
- [ ] 4.2.3 회원가입 API 연동
- [ ] 4.2.4 성공/실패 처리 및 피드백

#### 4.3 로그인 페이지 구현
- [ ] 4.3.1 로그인 폼 UI 구현 (참조 문서 기반)
- [ ] 4.3.2 이메일/사용자명 로그인 지원
- [ ] 4.3.3 로그인 API 연동
- [ ] 4.3.4 성공 시 토큰 저장 및 리다이렉트

#### 4.4 이메일 인증 페이지 구현
- [ ] 4.4.1 이메일 인증 폼 UI 구현 (참조 문서 기반)
- [ ] 4.4.2 인증 코드 발송 기능 구현
- [ ] 4.4.3 인증 코드 확인 기능 구현
- [ ] 4.4.4 인증 완료 처리

#### 4.5 아이디/비밀번호 찾기 페이지 구현
- [ ] 4.5.1 아이디 찾기 폼 UI 구현
- [ ] 4.5.2 비밀번호 찾기 폼 UI 구현
- [ ] 4.5.3 관련 API 구현 (필요 시)

### Phase 5: 실제 사용 테스트 및 버그 수정
- [ ] 5.1 회원가입 플로우 전체 테스트
- [ ] 5.2 로그인 플로우 전체 테스트
- [ ] 5.3 이메일 인증 플로우 전체 테스트
- [ ] 5.4 발견된 버그 TDD 방식으로 수정

### Phase 6: UI/UX 개선 및 마무리
- [ ] 6.1 반응형 디자인 적용
- [ ] 6.2 로딩 상태 및 애니메이션 추가
- [ ] 6.3 접근성 개선
- [ ] 6.4 성능 최적화

## 🔧 기술적 고려사항

### 보안
- 비밀번호 해싱 (bcrypt) ✅
- JWT 토큰 보안 ✅
- CSRF 보호
- 입력 데이터 검증 ✅

### 사용자 경험
- 실시간 폼 검증
- 명확한 에러 메시지
- 로딩 상태 표시
- 반응형 디자인

## 📝 참고사항
- 모든 페이지에서 휴대폰 인증 섹션 제거
- 이메일 인증 기반으로만 구현
- 기존 프로젝트 구조 및 스타일 가이드 준수
- references 폴더의 기존 페이지 참고하여 구현

## 📊 진행 상황
- **완료된 Phase**: 1, 2, 3 (API 구현 완료)
- **현재 작업**: Phase 4 - UI 우선 구현
- **다음 단계**: 사용자 메뉴 UI 구현
- **마지막 수정**: 2025년 06월 03일 18시 10분 (KST)

## ✅ 완료된 API 목록
- **회원가입 API**: `/api/auth/signup` (TDD 완료)
- **로그인 API**: `/api/auth/login` (TDD 완료)
- **이메일 인증 발송 API**: `/api/auth/send-verification` (TDD 완료)
- **이메일 인증 확인 API**: `/api/auth/verify-email` (TDD 완료) 