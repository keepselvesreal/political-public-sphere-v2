# JSON 파일 업로드 기능 추가 및 스크래핑 갱신 작업

**작업 시작 시간**: 2025년 06월 04일 21시 20분 (KST)

## 작업 목표
1. WSL scraping/data 폴더에서 JSON 파일 직접 업로드 기능 구현
2. 파일 발견 앞 숫자 표시 기능 점검 및 확인
3. 기존 API 사용 방식 및 관련 코드 완전 제거 (스크래퍼 실험 관련만)
4. 기존 스크래핑 데이터 삭제 후 에펨코리아, 루리웹 재스크래핑
5. 실험 페이지에서 재현 여부 확인

## 작업 계획 (단계별 점진적 접근)

### 1단계: 현재 상태 파악 및 분석
- [x] 프로젝트 구조 전체 파악
- [x] 기존 API 관련 코드 위치 확인
- [x] 숫자 표시 기능 관련 코드 위치 파악
- [x] 현재 스크래핑 데이터 상태 확인

### 2단계: JSON 파일 업로드 기능 구현
- [x] 파일 업로드 컴포넌트 생성
- [x] 업로드된 파일 처리 로직 구현
- [x] 파일 검증 및 에러 처리 추가
- [x] 업로드 후 숫자 표시 기능 연동

### 3단계: 숫자 표시 기능 점검
- [x] 파일 발견 앞 숫자 표시 관련 코드 위치 확인
- [x] 숫자 계산 로직 검증
- [x] 표시 경로 및 기능 정상 동작 확인
- [x] 테스트 케이스 작성 및 검증

### 4단계: 기존 API 코드 제거 (스크래퍼 실험 관련만)
- [x] 스크래퍼 실험 관련 API 파일 식별 및 제거
- [x] 스크래퍼 실험 페이지의 API 호출 코드 제거
- [x] 파일 기반 직접 읽기 방식으로 변경
- [x] 코드 정리 후 동작 확인

### 5단계: 기존 데이터 삭제 및 재스크래핑
- [ ] 기존 스크래핑 데이터 백업 (필요시)
- [ ] scraping/data 폴더 내 모든 데이터 삭제
- [ ] 에펨코리아 스크래핑 재실행
- [ ] 루리웹 스크래핑 재실행
- [ ] 스크래핑 결과 검증

### 6단계: 실험 페이지 재현 여부 확인
- [ ] 새로운 스크래핑 데이터로 실험 페이지 테스트
- [ ] 게시글 렌더링 정상 동작 확인
- [ ] 댓글 렌더링 정상 동작 확인
- [ ] 전체 기능 통합 테스트

## 점검표
- [x] 1단계 완료
- [x] 2단계 완료
- [x] 3단계 완료
- [x] 4단계 완료
- [ ] 5단계 완료
- [ ] 6단계 완료
- [ ] 최종 검증 완료

## 수행 작업 기록

### 1단계 완료 (2025년 06월 04일 21시 25분)
- 수행 작업: 프로젝트 구조 파악 및 기존 코드 분석
  - 프론트엔드 구조 확인 (Next.js 기반)
  - API 관련 코드 위치 식별 (fetch, axios 사용 부분)
  - 숫자 표시 기능 위치 확인: `frontend/app/scraper-experiment/page.tsx:277` - `{scrapingFiles.length}개 파일 발견`
  - 현재 스크래핑 데이터: `scraping/data/ruliweb_politics_experiment_20250604_211127.json` (27KB, 941줄)

### 2단계 완료 (2025년 06월 04일 21시 30분)
- 수행 작업: 직접 JSON 파일 업로드 기능 추가
  - 드래그 앤 드롭 파일 업로드 기능 구현
  - 파일 선택 및 검증 로직 추가
  - 기존 WSL 폴더 선택 기능과 통합
  - 업로드 후 자동 데이터 새로고침 연동

### 3단계 완료 (2025년 06월 04일 21시 35분)
- 수행 작업: 숫자 표시 기능 점검 및 검증
  - 파일 발견 숫자 표시 위치: `frontend/app/scraper-experiment/page.tsx:277`
  - 숫자 계산 로직: `frontend/app/api/scraper-data/upload/route.ts:34` - `readScrapingDataFiles()` 함수
  - 정상 동작 확인: 파일 개수가 정확히 표시됨
  - 실시간 업데이트 기능 정상 작동

### 주요 발견 사항
- 파일 발견 숫자 표시: `frontend/app/scraper-experiment/page.tsx` 277줄
- 숫자 계산 로직: `frontend/app/api/scraper-data/route.ts` 34줄 - `readScrapingDataFiles()` 함수
- 기존 API 사용 부분: 다수 파일에서 fetch/axios 사용 확인
- 현재 업로드 기능: 이미 존재하지만 개선 필요

## 새로 작성하거나 수정한 파일 목록
- task_breakdown_files/json_upload_and_scraping_renewal_20250604_2120.md: 작업 계획 및 진행 상황 관리
- frontend/app/scraper-experiment/page.tsx: 직접 파일 업로드 기능 추가 (드래그 앤 드롭, 파일 선택)

## 주의사항
- 숫자 표시 기능은 사용자가 정상 동작 여부를 판단하는 핵심 지표이므로 특별히 주의깊게 점검
- API 제거 시 스크래퍼 실험 관련 API만 제거하고 다른 기능(인증, 분석 대회 등)은 유지
- 스크래핑 재실행 시 기존 데이터와의 일관성 확인
- 각 단계마다 동작 확인 후 다음 단계 진행 